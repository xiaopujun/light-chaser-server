# 开发规范

请开发人员自觉遵守本规范要求的开发细则

## 数据库规范

--- 

#### 建表必加字段

建立的所有表必须拥有一下默认字段

- deleted: 删除标识, 0: 未删除, 1: 已删除 默认0
- create_time: 创建时间 默认当前时间，由数据库自动创建
- update_time: 更新时间，默认当前时间，由数据库自动更新

```sql
create table tableName
(
    deleted     int       default 0                 not null comment '删除标识',
    create_time timestamp default CURRENT_TIMESTAMP not null comment '创建时间',
    update_time timestamp default current_timestamp not null on update CURRENT_TIMESTAMP comment '更新时间'
)
```

所有数据都只能逻辑删除，不可直接使用delete语句删除表中数据。物理删除由定时任务自动完成。

#### 建表命名规范

- 模块前缀+表名

例如：订单业务的表名：order_xxx 产品业务的表名：product_xxx

- 临时表/备份表
    - 临时表以 tmp_ 开头（如 tmp_user_data）。
    - 备份表以 bak_ 开头并加日期（如 bak_order_20250620）。

#### 字段和表要求

- 避免使用 MySQL 保留字 如：user, time, password
- 必须写表和字段注释
- 字段必须有长度限制，非必要不使用text等无长度限制的字段
- 每个表尽量都要有独立的主键 如: ID
- 不使用外键

## Java实体规范

下面是项目中使用的实体类命名规范，请开发人员严格遵守此规范

---

| 类型    | 全称                         | 使用场景描述                             | 命名建议                      |
|-------|----------------------------|------------------------------------|---------------------------|
| PO    | Persistent Object（持久对象）    | 数据库表映射，一般与 ORM 框架（如 MyBatis、JPA）使用 | `UserPO`, `OrderPO`       |
| DTO   | Data Transfer Object（传输对象） | 接收参数或返回响应的数据结构（通常用于 Controller 层）  | `UserDTO`, `LoginDTO`     |
| VO    | View Object（视图对象）          | 前端视图展示的封装对象，一般用于返回给前端              | `UserVO`, `ProductVO`     |
| BO    | Business Object（业务对象）      | 封装复杂业务逻辑中间态，可由多个 PO/DTO 组合而成       | `UserBO`, `OrderBO`       |
| Query | Query Object（查询对象）         | Controller 接收参数，用于复杂条件的查询          | `UserQuery`, `OrderQuery` |

---

#### 1. 命名规则（统一 Pascal 命名）

* 类名必须使用大驼峰（PascalCase）
* 后缀明确表示用途，如：`UserDTO`, `ProductVO`
* 避免混用：不要把数据库字段都写进 DTO，也不要让 Controller 接口直接使用 PO

---

#### 2. 层次结构的使用

| 层          | 入参类型            | 出参类型         | 使用实体说明             |
|------------|-----------------|--------------|--------------------|
| Controller | `DTO` 或 `Query` | `VO` 或 `DTO` | 参数解耦业务模型，返回视图友好的对象 |
| Service    | `DTO`/`BO`      | `DTO`/`BO`   | 使用业务模型对象处理转换       |
| DAO/Mapper | `PO`            | `PO`         | 映射数据库表，字段命名与表字段一致  |

---

---

### ✅ 项目结构

```
├── modal
│   ├── po       // 持久层
│   ├── dto      // 接收请求、传递数据
│   ├── vo       // 返回前端
│   ├── bo       // 业务内部封装对象
│   ├── query    // 复杂查询参数
├── controller
├── service
├── mapper
```

---
